#www.gexing.com-access文件input模块配置
$InputFileName /data/www/logs/www.gexing.com-access.log
$InputFileTag webFront-nginx-www-access:
$InputFileStateFile www.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#www.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/www.gexing.com-error.log
$InputFileTag webFront-nginx-www-error:
$InputFileStateFile www.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#z.gexing.com-access文件input模块配置
$InputFileName /data/www/logs/z.gexing.com-access.log
$InputFileTag webFront-nginx-z-access:
$InputFileStateFile z.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#z.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/z.gexing.com-error.log
$InputFileTag webFront-nginx-z-error:
$InputFileStateFile z.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#shouji.gexing.com-access文件input模块配置
$InputFileName /data/www/logs/shouji.gexing.com-access.log
$InputFileTag webFront-nginx-shouji-access:
$InputFileStateFile shouji.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#shouji.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/shouji.gexing.com-error.log
$InputFileTag webFront-nginx-shouji-error:
$InputFileStateFile shouji.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#jz.gexing.com-access文件input模块配置
$InputFileName /data/www/logs/jz.gexing.com-access.log
$InputFileTag webFront-nginx-jz-access:
$InputFileStateFile jz.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#jz.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/jz.gexing.com-error.log
$InputFileTag webFront-nginx-jz-error:
$InputFileStateFile jz.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#jic.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/jic.gexing.com-error.log
$InputFileTag webFront-nginx-jic-error:
$InputFileStateFile jic.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#biz.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/biz.gexing.com-error.log
$InputFileTag webFront-nginx-biz-error:
$InputFileStateFile biz.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#count.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/count.gexing.com-error.log
$InputFileTag webFront-nginx-count-error:
$InputFileStateFile count.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#game.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/game.gexing.com-access.log
$InputFileTag webFront-nginx-game-access:
$InputFileStateFile game.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#game.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/game.gexing.com-error.log
$InputFileTag webFront-nginx-game-error:
$InputFileStateFile game.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#xue.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/xue.gexing.com-access.log
$InputFileTag webFront-nginx-xue-access:
$InputFileStateFile xue.gexing.com-access.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#xue.gexing.com-error文件input模块配置
$InputFileName /data/www/logs/xue.gexing.com-error.log
$InputFileTag webFront-nginx-xue-error:
$InputFileStateFile xue.gexing.com-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#webFront-php-fpm-error文件input模块配置
$InputFileName /data/www/logs/php-fpm-error.log
$InputFileTag webFront-php-fpm-error:
$InputFileStateFile php-fpm-error.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#webFront-php-fpm-slow文件input模块配置
$InputFileName /data/www/logs/php-fpm-slow.log
$InputFileTag webFront-php-fpm-slow:
$InputFileStateFile php-fpm-slow.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#webFront-messages文件input模块配置
$InputFileName /var/log/messages
$InputFileTag webFront-messages:
$InputFileStateFile messages.stat
$InputFileSeverity info
$InputFileFacility local7
$InputFilePollInterval 5
$InputRunFileMonitor

#却除nginx里含有200状态码的日志filter配置
if ($APP-NAME == 'webFront-nginx-z-access' or $APP-NAME == 'webFront-nginx-www-access' or $APP-NAME == 'webFront-nginx-z-error' or $APP-NAME == 'webFront-nginx-www-error' or $APP-NAME == 'webFront-nginx-jz-access' or $APP-NAME == 'webFront-nginx-shouji-access') and (($msg contains '  rc:200  ') or ( $msg contains '  rc:404  ')  or ($msg contains '  rc:301  ') or ($msg contains '  rc:302  ') or ( $msg contains '  rc:304  ') or ($msg contains 'fcgi_cache'))  then ~
#过滤jic的No such file or directory关键字日志
if ( $APP-NAME == 'webFront-nginx-jic-error' and $msg contains 'No such file or directory' ) then ~

#syslog 转发到relay机器进行邮件与短信提醒
$ActionQueueFileName fwdRule3 # unique name prefix for spool files
$ActionQueueMaxDiskSpace 1g   # 1gb space limit (use as much as possible)
$ActionQueueSaveOnShutdown on # save messages to disk on shutdown
$ActionQueueType LinkedList   # run asynchronously(action memory queue)
$ActionResumeRetryCount -1    # infinite retries if host is down
$ActionQueueSize  10000      # over quota message is discarded(10000*5k=50m)
$ActionResumeInterval 5     #30 seconds retry, retry policy notice

if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-www-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-www-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-www-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-www-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-z-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-z-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-z-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-z-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-shouji-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-shouji-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-shouji-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-shouji-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jz-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jz-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jz-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jz-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-game-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-game-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-game-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-game-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-xue-access'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-xue-access'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-xue-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-xue-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-count-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-count-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-biz-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-biz-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jic-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-nginx-jic-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-php-fpm-error'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-php-fpm-error'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-php-fpm-slow'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-php-fpm-slow'  then ~
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-messages'  then @@<%= ip%>:10514
if  $syslogfacility-text == 'local7' and $syslogseverity-text == 'info' and $APP-NAME == 'webFront-messages'  then ~
